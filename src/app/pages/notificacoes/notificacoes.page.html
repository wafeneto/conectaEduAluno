<app-header
  title="Notificações"
  [hasBackButton]="true"
  [hasNotificationIcon]="false"
></app-header>

<ion-content>
  <ion-list lines="none" class="notification-list">
    <ion-item-sliding *ngFor="let item of mensagens; let index = index">
      <ion-item class="notification-item">
        <ion-icon slot="start" [name]="item.icone" class="notification-icon"></ion-icon>

        <ion-label (click)="abreDetalhesDaMensagem(item, index)">
          <h3 class="notification-title">{{ item.tipoFormatado }}</h3>
          <p class="notification-text">{{ item.texto }}</p>
        </ion-label>

        <div class="metadata-end-wrapper" slot="end">
          <ion-note color="medium">{{formataData(item.dataFormatado)}}</ion-note>
          <ion-icon color="medium" name="chevron-forward"></ion-icon>
        </div>
      </ion-item>

      <ion-item-options side="end">
        <ion-item-option color="danger" (click)="apagaMensagem(item)">
          <ion-icon slot="icon-only" name="trash"></ion-icon>
        </ion-item-option>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>

  <ion-modal trigger="open-modal">
    <ng-template>
      <ion-header>
        <ion-toolbar class="modal-toolbar">
          <ion-buttons slot="end">
            <ion-button (click)="fechaModal()">
              <ion-icon slot="icon-only" name="close"></ion-icon>
            </ion-button>
          </ion-buttons>
          <ion-title class="ion-text-uppercase modal-title">
            {{ mensagemAtual?.tipoFormatado }}
          </ion-title>
        </ion-toolbar>
      </ion-header>

      <ion-content class="ion-padding modal-content">
        <ion-card mode="ios" class="modal-card">
          <ion-card-content>
            <p class="modal-text" [innerHTML]="mensagemAtual?.texto"></p>
          </ion-card-content>
        </ion-card>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>
